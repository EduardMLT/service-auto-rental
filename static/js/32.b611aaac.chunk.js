"use strict";(self.webpackChunkservice_auto_rental=self.webpackChunkservice_auto_rental||[]).push([[32],{32:(e,n,t)=>{t.r(n),t.d(n,{default:()=>z});var a=t(60),i=t(320),l=t(372);l.c.defaults.baseURL="https://6574665df941bda3f2afb2f5.mockapi.io/api/v1/";const o=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1?arguments[1]:void 0;try{const t=await l.c.get("/data-auto");console.log("fetchHome - filters",n);let a=t.data;console.log("fetchHome - filteredCars",a),""!==n.make&&(console.log("fetchHome - filters.make",n.make),a=a.filter((e=>e.make===n.make)),console.log("fetchHome - filteredCars",a)),""!==n.price&&(a=a.filter((e=>parseInt(e.rentalPrice.replace(/\D/g,""),10)<=n.price))),null!==n.minMileage&&(a=a.filter((e=>Number(e.mileage)>=Number(n.minMileage)))),null!==n.maxMileage&&(a=a.filter((e=>Number(e.mileage)<=Number(n.maxMileage))));const i=(e-1)*n.perPage,o=i+n.perPage;return a.slice(i,o)}catch(t){throw console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u0440\u0438\u043c\u0430\u043d\u043d\u0456 \u0434\u0430\u043d\u0438\u0445:",t),t}};var r,c,s,p=t(312),g=t(360);const d=g.cp.ul(r||(r=(0,p.c)([" \n  display: flex;\n  align-items: center;\n  justify-content: center;\n  column-gap: 29px;\n  row-gap: 50px;\n  flex-wrap: wrap;\n  margin: 50px 0 100px;\n"]))),h=g.cp.li(c||(c=(0,p.c)(["\n  display: block;\n  padding: 10px, 15px;\n  font-family: Roboto sans-serif;\n  font-size: 22px;\n  font-weight: 700;\n  color: rgb(106 162 144);\n"]))),m=g.cp.span(s||(s=(0,p.c)(["\n  color: var(--pr-button-background-color);\n  font-size: 16px;\n\n  &:hover,\n  :focus {\n    color: var(--hovered-button-background-color);\n  }\n"])));var u=t(496);const x=e=>{let{items:n,openModal:t}=e;return(0,u.jsx)(d,{children:n.map(((e,n)=>{let{id:a,make:i,model:l,img:o}=e;return(0,u.jsx)(h,{children:(0,u.jsxs)("div",{onClick:()=>t(n),children:[(0,u.jsxs)(m,{children:[i," ",l]}),(0,u.jsx)("div",{children:(0,u.jsx)("img",{src:o,width:"200",height:"250",alt:"car"})}),(0,u.jsxs)(m,{children:[i," ",l]})]})},a)}))})};var f,j,k,b,v=t(480);const M=g.cp.div(f||(f=(0,p.c)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n"]))),y=g.cp.div(j||(j=(0,p.c)(["\n  background: #fff;\n  padding: 20px;\n  border-radius: 8px;\n  position: relative;\n  z-index: 1001;\n  max-width: 900px;\n  width: 100%;\n  text-align: center;\n\n  img {\n    max-width: 100%;\n    max-height: 100%;\n    object-fit: contain;\n  }\n"]))),w=g.cp.span(k||(k=(0,p.c)(["\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  cursor: pointer;\n  font-size: 20px;\n  color: #333;\n"]))),C=g.cp.img(b||(b=(0,p.c)(["\n  max-width: 100%;\n  max-height: 100%;\n  object-fit: contain;\n  width: 600px;\n  height: 400px;\n  margin: auto;\n  display: block;\n"]))),S=e=>{let{item:n,closeModal:t}=e;return(0,a.useEffect)((()=>{var e;e=n.img,(new Image).src=e}),[n.img]),(0,u.jsx)(M,{children:(0,u.jsxs)(y,{children:[(0,u.jsx)(w,{onClick:t,children:"\xd7"}),(0,u.jsxs)("h2",{children:[n.make," ",n.model]}),(0,u.jsx)(C,{src:n.img,alt:"car"}),(0,u.jsxs)("p",{children:["Description: ",n.description]})]})})},z=()=>{const[e,n]=(0,a.useState)([]),[t,l]=(0,a.useState)(!1),[r,c]=(0,a.useState)(1),[s,p]=(0,a.useState)(!1),[g,d]=(0,a.useState)(!1),[h,m]=(0,a.useState)(null),[f,j]=(0,a.useState)({make:"",price:"",minMileage:null,maxMileage:null,perPage:12}),[k,b]=(0,a.useState)([]);(0,a.useEffect)((()=>{console.log("Fetching makes...");(async()=>{try{const e=await fetch("/path/to/makes.json"),n=await e.json();b(n.makes),console.log("Makes loaded:",n.makes)}catch(e){console.error("Error fetching makes:",e)}})()}),[]);const M=(0,a.useCallback)((async()=>{l(!0);try{console.log("getMovies - filters ",{filters:f});const e=await o(1,f);0===e.length?(console.log("1.1 -getMovies  "),p(!0)):(console.log("1.2 -getMovies  "),n(e))}catch(e){i.cp.error(e)}finally{l(!1)}}),[l,p,n,f]);return(0,a.useEffect)((()=>{M()}),[M]),(0,u.jsxs)(u.Fragment,{children:[t&&(0,u.jsx)(v.c,{}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("label",{children:["Make:",(0,u.jsxs)("select",{value:f.make,onChange:e=>j((n=>({...n,make:e.target.value}))),children:['console.log("make", make);',(0,u.jsx)("option",{value:"",children:"Select Make"}),k.map((e=>(0,u.jsx)("option",{value:e,children:e},e)))]})]}),(0,u.jsxs)("label",{children:["Price:",(0,u.jsx)("input",{type:"text",value:f.price,onChange:e=>j((n=>({...n,price:e.target.value})))})]}),(0,u.jsxs)("label",{children:["Min Mileage:",(0,u.jsx)("input",{type:"number",value:f.minMileage,onChange:e=>j((n=>({...n,minMileage:e.target.value})))})]}),(0,u.jsxs)("label",{children:["Max Mileage:",(0,u.jsx)("input",{type:"number",value:f.maxMileage,onChange:e=>j((n=>({...n,maxMileage:e.target.value})))})]}),(0,u.jsx)("button",{onClick:async()=>{l(!0);try{const e=await o(1,f);n(e),c(1),p(!1)}catch(e){i.cp.error(e)}finally{l(!1)}},children:"Search"})]}),(0,u.jsx)(x,{items:e,openModal:e=>{d(!0),m(e)}}),!s&&(0,u.jsx)("button",{onClick:async()=>{l(!0);try{const e=await o(r+1,f);0===e.length?p(!0):(n((n=>[...n,...e])),c((e=>e+1)))}catch(e){i.cp.error(e)}finally{l(!1)}},children:"Load More"}),s&&(0,u.jsx)("p",{children:"This is the entire catalog."}),g&&(0,u.jsx)(S,{item:e[h],closeModal:()=>{d(!1),m(null)}}),(0,u.jsx)(i.ox,{position:"bottom-center",reverseOrder:!0})]})}}}]);
//# sourceMappingURL=32.b611aaac.chunk.js.map